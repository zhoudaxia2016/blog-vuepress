---
title: fzf
date: 2019-11-18
categories: develop
tags:
  - shell
  - tool
---

fzf是一个非常不错的模糊搜索工具。一开始我对它的理解是非常肤浅的，以为它只是个文件搜索工具。其实它的核心并不是文件搜索，而是模糊搜索，任何命令的输出都可以作为它搜索的对象。

### 工作流程

如果有标准输出，则fzf会从标准输出获取搜索对象，如：
```
ls | fzf
```
则会搜索当前目录下的文件

若没有标准输出，则会获取该环境变量：`FZF_DEFAULT_COMMAND`的命令结果。比如：
```
export FZF_DEFAULT_COMMAND=ls
fzf
```
和上面命令结果是一样的。

若都没有，则使用find命令搜索当前目录下的文件。

从以上可以看出来，文件搜索根本不是它的强项，它只是将获取的结果筛选出来而已。

### 前端

它可以说是模糊搜索的前端，那么来看看它最重要的前端界面部分。

#### 1. 界面

通过启动选项，我们可以控制窗口的大小和样式等等。
```
fzf --height=10 # 打开窗口为10行
fzf --border # 渲染border
fzf --reverse # 输入框放到头部
fzf --color=fg:100 # 设置各部分颜色
```

这些其实都不是非常实用，觉得自己非常有设计能力的同学可以尝试一下这些选项。

除了这些，比较重要的选项是这个：

```
fzf --preview 'cat {}'
```
可以用来对选中的结果进行预览文件内容。单引号里面的命令可以替换为
你喜欢的命令。`{}`代表选中的内容。比如搜索文件时，就代码选中的文件名。
默认会在右边打开一个窗口用来输出单引号里的命令输出。

#### 2. 快捷键

在搜索过程中，我们可以使用一些快捷键：

* ctrl-j, ctrl-k 向上或者向下移动
* enter, double click 选中然后退出
* 类似命令行的emacs式快捷键
* esc 退出

#### 3. 搜索命令

* 'word 包含word的单词
* ^word word开头的单词
* word$ word结尾的单词
* !word 不包含word的单词
* word | abc 搜索word或者abc

#### 4. 其他shell命令

只要在命令的参数后面加上 \*\* 然后tab就会用fzf来搜索命令的参数
```
cd **<tab>
vim **<tab>
```

### example

待收集～
